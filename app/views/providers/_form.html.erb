<%= form_for @provider, html: { multipart: true } do |f| %>
	<% if @provider.errors.any? %>
    <div id="error_explanation" class="row mb-3">
					<div class="col-lg-12">
							<h2><%= pluralize(@provider.errors.count, "error") %> prohibited this provider from being saved:</h2>

							<ul>
									<% @provider.errors.full_messages.each do |message| %>
											<li><%= message %></li>
									<% end %>
							</ul>
					</div>
    </div>
  <% end %>

		<div class="row mb-3">
			<div class="col-lg-4">
        <label class="text-dark-grey">First Name *</label>
				<%= f.text_field :first_name, class: 'form-control border border-dark', required: true ,placeholder: 'First Name' %>
			</div>
			<div class="col-lg-2">
        <label class="text-dark-grey">Middle Name</label>
				<%= f.text_field :middle_name, class: 'form-control border border-dark', placeholder: 'Middle Name' %>
			</div>
			<div class="col-lg-4">
        <label class="text-dark-grey">Last Name *</label>
				<%= f.text_field :last_name, class: 'form-control border border-dark', required: true, placeholder: 'Last Name *' %>
			</div>
			<div class="col-lg-2">
        <label class="text-dark-grey">Suffix</label>
				<%= f.select :suffix, options_for_select(['Jr.', 'Sr.', 'II', 'III', 'IV', 'V'], @provider.suffix), { prompt: 'Suffix' }, { class: 'form-select border border-dark' } %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
        <label class="text-dark-grey">Gender *</label>
				<%= f.select :gender, options_for_select(['Male', 'Female', 'Non Binary'], @provider.suffix), { prompt: 'Gender' }, { class: 'form-select border border-dark', required: true } %>
			</div>
			<div class="col-lg-6">
        <label class="text-dark-grey">Birth Date</label>
				<%= f.text_field :birth_date, placeholder: 'Birth Date *', required: true ,class: 'form-control border border-dark', onfocus: "(this.type = 'date')" %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-12">
        <label class="text-dark-grey">Practitioner Type *</label>
				<%= f.collection_select :practitioner_type, @provider_types, :fch, :fch, { prompt: 'Practitioner Type *' }, { class: 'form-control border border-dark', required: true } %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">Address Line 1 *</label>
				<%= f.text_field :address_line_1, placeholder: 'Address Line 1 *', required: true , class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">Address Line 2</label>
				<%= f.text_field :address_line_2,  placeholder: 'Address Line 2', class: 'form-control border border-dark' %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">City *</label>
				<%= f.text_field :city, placeholder: 'City *', required: true , class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">State *</label>
				<%= f.select :state, options_for_select(@states.pluck(:name, :id), @provider.state), {prompt: 'State *'}, {class: 'form-select border border-dark'}  %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-4">
				<!-- new field -->
        <label class="text-dark-grey">Telephone Number *</label>
				<%= f.telephone_field :telephone_number, required: true ,placeholder: 'Telephone Number *', required: true , class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-2">
				<!-- new field -->
        <label class="text-dark-grey">Ext</label>
				<%= f.text_field :ext, placeholder: 'Ext' , class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">Email *</label>
				<%= f.text_field :email_address,  placeholder: 'Email Address *', required: true, class: 'form-control border border-dark' %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
        <label class="text-dark-grey">SSN *</label>
				<%= f.text_field :ssn, placeholder: 'SSN *', required: true ,class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-6">
        <label class="text-dark-grey">NPI *</label>
				<%= f.text_field :npi, placeholder: 'NPI *', required: true ,class: 'form-control border border-dark' %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
        <label class="text-dark-grey">DEA Number *</label>
				<%= f.text_field :dea_number, required: true ,placeholder: 'DEA Number *', class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">DEA Registration Date</label>
					<%= f.select :dea_registration_date, options_for_select(@states.pluck(:name, :id), @provider.dea_registration_date),  {prompt: 'DEA Registration Date'}, {:class => 'form-select border border-dark'}  %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
        <label class="text-dark-grey">DEA License Effective Date *</label>
				<%= f.text_field :dea_license_effective_date, placeholder: 'DEA License Effective Date *', required: true ,class: 'form-control border border-dark', onfocus: "(this.type = 'date')" %>
			</div>
			<div class="col-lg-6">
        <label class="text-dark-grey">DEA License Expiration Date *</label>
				<%= f.text_field :dea_license_expiration_date, placeholder: 'DEA License Expiration Date *', required: true ,class: 'form-control border border-dark', onfocus: "(this.type = 'date')" %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">Hire date of provider seeing patients *</label>
				<%= f.text_field :provider_hire_date_seeing_patient,  placeholder: 'Hire date of provider seeing patients *', required: true, class: 'form-control border border-dark', onfocus: "(this.type = 'date')" %>
			</div>
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">Effective date of provider seeing patients *</label>
				<%= f.text_field :effective_date_seeing_patient, required: true , placeholder: 'Effective date of provider seeing patients *', class: 'form-control border border-dark', onfocus: "(this.type = 'date')" %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-4">
				<!-- new field -->

        <label class="text-dark-grey">Medicare Provider Number *</label>
				<%= f.text_field :medicare_provider_number,  placeholder: 'Medicare Provider Number *', required: true, class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-4">
				<!-- new field -->
        <label class="text-dark-grey">Medicaid Provider Number *</label>
				<%= f.text_field :medicaid_provider_number,  placeholder: 'Medicaid Provider Number *', required: true, class: 'form-control border border-dark'%>
			</div>
			<div class="col-lg-4">
				<!-- new field -->
        <label class="text-dark-grey">TRICARE Provider Number *</label>
				<%= f.text_field :tricare_provider_number,  placeholder: 'TRICARE Provider Number *', required: true, class: 'form-control border border-dark' %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
				<!-- new field -->
				<label class="text-dark-grey">Admitting Privileges</label>
				<!-- will still need to get options from Rave -->
	   <%= f.select :admitting_privileges, options_for_select([]), { prompt: '' }, {:class => 'form-select border border-dark'}  %>
			</div>
			<div class="col-lg-6">
				<!-- new field -->
				<label class="text-dark-grey">Have you gone recently through revalidation with any payor?</label>
	    <%= f.select :revalidation, options_for_select([['Yes','yes'],['No','no']], @provider.revalidation), { prompt: '' }, {:class => 'form-select border border-dark'}  %>
			</div>
		</div>
		<div class="row mb-5">
			<div class="col-lg-6">
				<!-- new field -->
				<label class="text-dark-grey">Are you employed by other groups or facilities?</label>
	            <%= f.select :employed_by_other, options_for_select([['Yes','yes'],['No','no']], @provider.employed_by_other), { prompt: '' }, {:class => 'form-select border border-dark'}  %>

			</div>
			<div class="col-lg-6">
				<!-- new field -->
				<label class="text-dark-grey">Does the provider require to work under a supervising licensed psychologist?</label>
	            <%= f.select :supervised_by_psychologist, options_for_select([['Yes','yes'],['No','no']], @provider.supervised_by_psychologist), { prompt: '' }, {:class => 'form-select border border-dark'}  %>
			</div>
		</div>

		<div class="row-mb-5">
			<div class="col-lg-12 mb-2">
				<strong>Medical School</strong>
			</div>
			<div class="col-lg-12">
				<div class="row mb-3">
					<div class="col-lg-6">
						<!-- new field -->
          <label class="text-dark-grey">Medical School Name</label>
						<%= f.text_field :medical_school_name,  placeholder: 'Medical School Name',class: 'form-control border border-dark'%>
					</div>
					<div class="col-lg-6">
						<!-- new field -->
          <label class="text-dark-grey">Medical School Address</label>
						<%= f.text_field :medical_school_address,  placeholder: 'Medical School Address', class: 'form-control border border-dark'%>
					</div>
				</div>
				<div class="row mb-3">
					<div class="col-lg-6">
						<!-- new field -->
            <label class="text-dark-grey">Graduation Date *</label>
						<%= f.text_field :graduation_date,  required: true ,placeholder: 'Graduation Date *', class: 'form-control border border-dark', onfocus: "(this.type = 'date')" %>
					</div>
					<div class="col-lg-6">
						<!-- new field -->
            <label class="text-dark-grey">Copy of Certificate</label>
						<%= f.file_field :school_certificate,  placeholder: 'Copy of Certificate',  class: 'form-control border border-dark', title: 'Copy of Certificate'%>
						<%= HtmlUtils.generate_view_link file_url: @provider.school_certificate.url %>
					</div>
				</div>
			</div>
		</div>
		<hr>
		<div class="row mb-3">
			<div class="col-lg-6">
        <label class="text-dark-grey">CAQH ID *</label>
				<%= f.text_field :caqhid, required: true ,placeholder: 'CAQH ID *', class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-6">
        <label class="text-dark-grey">CAQH Attestation Date *</label>
				<%= f.text_field :caqh_attestation_date, required: true ,placeholder: 'CAQH Attestation Date *', class: 'form-control border border-dark', onfocus: "(this.type = 'date')" %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
        <label class="text-dark-grey">CAQH PDF</label>
				<%= f.file_field :caqh_pdf,  placeholder: 'CAQH PDF',  class: 'form-control border border-dark', title: 'CAQH PDF'%>
				<%= HtmlUtils.generate_view_link file_url: @provider.caqh_pdf.url %>
			</div>
			<div class="col-lg-6">
        <label class="text-dark-grey">CAQH PDF Date Received *</label>
				<%= f.text_field :caqh_pdf_date_received, required: true ,placeholder: 'CAQH PDF Date Received *', class: 'form-control border border-dark', onfocus: "(this.type = 'date')" %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">CAQH Username</label>
				<%= f.text_field :caqh_username,  placeholder: 'CAQH Username', class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">CAQH Password</label>
				<%= f.text_field :caqh_password,  placeholder: 'CAQH Password', class: 'form-control border border-dark' %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
				<!-- new field -->
      <label class="text-dark-grey">CAQH State</label>
	   <%= f.select :caqh_state, options_for_select(@states.pluck(:name, :id), @provider.caqh_state), {prompt: 'CAQH State'}, {:class => 'form-select border border-dark'}  %>
			</div>
			<div class="col-lg-6">
				<!-- new field -->
        <label class="text-dark-grey">CAQH App</label>
				<%= f.text_field :caqh_app,  placeholder: 'CAQH App', class: 'form-control border border-dark' %>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
				<!-- new field -->
				<!-- will need to get options from rave -->
        <label class="text-dark-grey">CAQH Payor</label>
	   <%= f.select :caqh_payor, options_for_select([]), {prompt: 'CAQH Payor'}, {:class => 'form-select border border-dark'}  %>
			</div>
		</div>
		<div class="row mb-3 mt-2">
			<div class="col-lg-12 mt-3">
				<h3>Taxonomy</h3>
			</div>
			<div id="taxonomies">
				 <div class="fields">
						<%= f.fields_for :taxonomies do |taxonomy_fields| %>
							<%= render 'taxonomy_fields', f: taxonomy_fields %>
						<% end %>
				 </div>
					<div class="links mt-2">
						<button type="button" class="add_association btn btn-primary" > <i class="bi bi-plus-circle-fill"></i> 	Add Taxonomy </button>
					</div>
			</div>
		</div>
		<div class="row mb-3 mt-2">
			<div class="col-lg-12 mt-3">
				<h3>License</h3>
			</div>
			<div id="licenses">
				 <div class="fields">
						<%= f.fields_for :licenses do |license_fields| %>
							<%= render 'license_fields', f: license_fields %>
						<% end %>
				 </div>
					<div class="links mt-2">
						<button type="button" class="add_association btn btn-primary" > <i class="bi bi-plus-circle-fill"></i> 	Add License </button>
					</div>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-12 mt-3">
				<h3>PA License</h3>
			</div>
			<div class="col-lg-4">
				<!-- only change placement -->
        <label class="text-dark-grey">NCCPA Number *</label>
				<%= f.text_field :nccpa_number, required: true ,placeholder: 'NCCPA Number *', class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-4">
        <label class="text-dark-grey">PA License Effective Date *</label>
				<%= f.text_field :pa_license_effective_date, required: true ,placeholder: 'PA License Effective Date *', class: 'form-control border border-dark', onfocus: "(this.type = 'date')" %>
			</div>
			<div class="col-lg-4">
        <label class="text-dark-grey">PA License Expiration Date *</label>
				<%= f.text_field :pa_license_expiration_date, required: true ,placeholder: 'PA License Expiration Date *', class: 'form-control border border-dark', onfocus: "(this.type = 'date')" %>
			</div>
		</div>
		<div class="row mb-3 mt-2">
			<div class="col-lg-12 mt-3">
				<h3>NP License</h3>
			</div>
			<div id="np_licenses">
					<div class="fields">
						<%= f.fields_for :np_licenses do |np_license_fields| %>
							<%= render 'np_license_fields', f: np_license_fields %>
						<% end %>
					</div>
					<div class="links mt-2">
						<button type="button" class="add_association btn btn-primary" > <i class="bi bi-plus-circle-fill"></i> 	Add NP License </button>
					</div>
			</div>
		</div>
		<div class="row mb-5 mt-2">
			<div class="col-lg-12 mt-3">
				<h3>RN License</h3>
			</div>
			<div id="rn_licenses">
					<div class="fields">
						<%= f.fields_for :rn_licenses do |rn_license_fields| %>
							<%= render 'rn_license_fields', f: rn_license_fields %>
						<% end %>
					</div>
					<div class="links mt-2">
						<button type="button" class="add_association btn btn-primary" > <i class="bi bi-plus-circle-fill"></i> 	Add RN License </button>
					</div>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-lg-6">
				<label class="text-dark-grey">Telehealth</label>
				<!-- new field -->
				<%= f.text_field :telehealth_license_number,  placeholder: 'Telehealth License Number', class: 'form-control border border-dark' %>
			</div>
			<div class="col-lg-6">
				<label class="text-dark-grey">Board Certification</label>
				<!-- new field -->
				<%= f.text_field :board_certification_number,  placeholder: 'Board Certification Number', class: 'form-control border border-dark' %>
			</div>
		</div>
		<div class="row mb-3 mt-5">
			<div class="col-lg-6">
				<!-- new field -->
	    <%= f.select :dco, options_for_select(@states.pluck(:name, :id), @provider.dco), {prompt: 'Practice Location'}, {:class => 'form-select border border-dark'}  %>
			</div>
			<div class="col-lg-6">
				<%= f.file_field :dco_file, placeholder: 'DCO *', class: 'form-control border border-dark' %>
				<%= HtmlUtils.generate_view_link file_url: @provider.dco_file.url %>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12 d-flex justify-content-end">
				<button class="btn btn-primary btn-md">Submit</button>
			</div>
		</div>
		<% end %>

		<% content_for :js do %>
		<script>
			$(document).ready(function() {
					// taxonomies
					$("#taxonomies").on("click", ".add_association", function() {
							var taxonomiesFields = $("#taxonomies .field");
							var newTaxonomy = taxonomiesFields.last().clone();
							var newId = new Date().getTime();
							newTaxonomy.html(newTaxonomy.html().replace(/taxonomies_attributes\]\[\d+\]/g, "taxonomies_attributes][" + newId + "]"));
							$("#taxonomies .fields").append(newTaxonomy);
					});

					// licenses
					$("#licenses").on("click", ".add_association", function() {
							var licensesFields = $("#licenses .field");
							var newLicense = licensesFields.last().clone();
							var newId = new Date().getTime();
							newLicense.html(newLicense.html().replace(/licenses_attributes\]\[\d+\]/g, "licenses_attributes][" + newId + "]"));
							$("#licenses .fields").append(newLicense);
					});

					// np licenses
					$("#np_licenses").on("click", ".add_association", function() {
							var npLicensesFields = $("#np_licenses .field");
							var newNpLicense = npLicensesFields.last().clone();
							var newId = new Date().getTime();
							newNpLicense.html(newNpLicense.html().replace(/np_licenses_attributes\]\[\d+\]/g, "np_licenses_attributes][" + newId + "]"));
							$("#np_licenses .fields").append(newNpLicense);
					});

					// rn licenses
					$("#rn_licenses").on("click", ".add_association", function() {
							var rnLicensesFields = $("#rn_licenses .field");
							var newRnLicense = rnLicensesFields.last().clone();
							var newId = new Date().getTime();
							newRnLicense.html(newRnLicense.html().replace(/rn_licenses_attributes\]\[\d+\]/g, "rn_licenses_attributes][" + newId + "]"));
							$("#rn_licenses .fields").append(newRnLicense);
					});

			});
		</script>
		<% end %>