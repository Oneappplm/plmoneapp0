<div class="content container-fluid">
	<%= render "enrollment_tracking_components/enrollment_nav"%>
	<div class="row mb-3">
		<div class="col-lg-6">
			<form class="form_search_with_icon">
			<div class="">
				<input type="" name="user_search" class="form-control">
				<i class="bi bi-search"></i>
			</div>
			</form>
		</div>
		<div class="col-lg-6 d-flex justify-content-end">
			<%= link_to	new_provider_url, class: "d-flex btn btn-primary btn-md" do %>
      <i class="bi bi-plus-lg me-2"></i>
      Add New Provider
      <% end %>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-8">
			<table class="table">
			  <thead>
			    <tr>
			      <th scope="col" class="bg-primary text-white">Provider Name</th>
			      <th scope="col" class="bg-primary text-white">Practitioner/Provider Type</th>
						<th scope="col" class="bg-primary text-white">NPI</th>
			      <th scope="col" class="bg-primary text-white">SSN</th>
			      <th scope="col" class="bg-primary text-white"></th>
			    </tr>
			  </thead>
			  <tbody>
						<%= render @providers %>
			  </tbody>
			</table>
		</div>
		<div class="col-lg-4">
			<div class="row">
				<div class="col-lg-12">
					<div class="card rounded p-1 shadow-lg px-3 mb-3">
						<p class="mb-0"><strong>Data Encoder: <%= @provider.encoded_by %></strong></p>
						<p class="mb-3"><strong>Encoded: <%= @provider.created_at%></strong></p>
						<p class="mb-0"><strong>Updated by: <%= @provider.updated_by %></strong></p>
						<p class="mb-0"><strong>Last updated: <%= @provider.updated_at%></strong></p>
					</div>

					<div class="card rounded shadow-lg p-1 px-3 mb-3">
						<div class="avatar-circle mt-3" style="text-align: center">
							<img class="avatar-img" src="../dist/assets/img/400x400/img1.jpg" alt="Image Description" style="width: 100px;">
						</div>
						<h3 class="font-bold mb-0 text-center my-3"><%= @provider.provider_name %></h3>
						<div class="text-left mt-3">
							<p class="mb-1"><strong>Gender:</strong> <%= @provider.gender %></p>
							<p class="mb-1"><strong>Date of Birth:</strong> <%= @provider.birth_date %></p>
							<p class="mb-1"><strong>Birth City:</strong> <%= @provider&.city %></p>
							<p class="mb-1"><strong>Birth State:</strong> <%= @provider&.state %></p>

							<h5 class="mt-2 text-center">Home Address</h5>
							<p class="mb-1"><strong>Address 1:</strong> <%= @provider&.address_line_1 %></p>
							<p class="mb-1"><strong>Address 2:</strong> <%= @provider&.address_line_2 %></p>
							<p class="mb-1"><strong>City:</strong> <%= @provider&.city %></p>
							<p class="mb-1"><strong>State:</strong> <%= @provider&.state %></p>
							<p class="mb-1"><strong>Phone Number:</strong> <%= @provider&.telephone_number %></p>
							<p class="mb-1"><strong>Ext:</strong> <%= @provider&.ext %></p>
							<p class="mb-1"><strong>Email:</strong> <%= @provider&.email_address %></p>

							<h5 class="mt-2 text-center">Medical School/Education</h5>
							<p class="mb-1"><strong>School Name:</strong> <%= @provider.medical_school_name %> </p>
							<p class="mb-1"><strong>School Address:</strong> <%= @provider.medical_school_address %> </p>
							<p class="mb-1"><strong>Graducation Date:</strong> <%= @provider&.graduation_date %></p>

							<h5 class="mt-2 text-center">Practitioner Type Details</h5>
							<p class="mb-1"><strong>Practitioner Type:</strong> <%= @provider.practitioner_type %></p>

							<% @provider&.taxonomies.each_with_index do |taxonomy,idx|%>
								<p class="mb-1"><strong>Taxonomy Code :</strong> <%= taxonomy.taxonomy_code %></p>
								<p class="mb-1"><strong>Taxonomy specialty :</strong> <%= taxonomy.specialty %></p>
							<% end %>
						</div>
					</div>	
					<div class="card rounded shadow-lg p-1 px-3 mb-3">
          <%= render partial: "global_components/collapsible_sidebar_header", locals: { title: 'Licenses & Numbers', collapse_name: 'licenses'}%>
          <div class="collapsible" style="<%= current_user&.is_card_open?('licenses') ? '' : 'display: none;' %>">
						<p class="mb-1"><strong>SSN:</strong> <%= @provider.ssn%></p>
						<p class="mb-1"><strong>NPI:</strong> <%= @provider.npi%></p>
						<p class="mb-1"><strong>Medicare Number:</strong> <%= @provider.medicare_provider_number %> </p>
						<p class="mb-1"><strong>Medicaid Number:</strong> <%= @provider.medicaid_provider_number %></p>
						<p class="mb-1"><strong>Tricare Number:</strong> <%= @provider.tricare_provider_number %> </p>
						
							<h5 class="text-center my-3">State License</h5>
							<p class="mb-1"><strong>State License Number:</strong> <%= @provider.nccpa_number %></p>
							<p class="mb-1"><strong>State License Effective Date:</strong> <%= @provider.pa_license_effective_date %></p>
							<p class="mb-1"><strong>State License Expiration Date:</strong> <%= @provider.pa_license_expiration_date %></p>
							<p class="mb-1"><strong>License Registration State:</strong> </p>

							<h5 class="text-center my-3">PA License</h5>
							<p class="mb-1"><strong>NCCPA Number:</strong> <%= @provider.nccpa_number %></p>
							<p class="mb-1"><strong>PA Effective Date:</strong> <%= @provider.pa_license_effective_date %></p>
							<p class="mb-1"><strong>PA Expiration Date:</strong> <%= @provider.pa_license_expiration_date %></p>

							<h5 class="text-center my-3">NP License</h5>
						<% @provider&.np_licenses.each_with_index do |license,idx|%>
							<p class="mb-1"><strong>NP License:</strong> <%= license.np_license_number %></p>
							<p class="mb-1"><strong>NP Effective Date:</strong> <%= license.np_license_effective_date %></p>
							<p class="mb-1"><strong>NP Expiration Date:</strong> <%= license.np_license_expiration_date %></p>
						<% end %>

							<h5 class="text-center my-3">RN License</h5>
						<% @provider&.rn_licenses.each_with_index do |license,idx|%>
							<p class="mb-1"><strong>RN License:</strong> <%= license.rn_license_number %></p>
							<p class="mb-1"><strong>RN Effective Date:</strong> <%= license.rn_license_effective_date %></p>
							<p class="mb-1"><strong>RN Expiration Date:</strong> <%= license.rn_license_expiration_date %></p>
						<% end %>

						<h5 class="text-center my-3">DEA License</h5>
						<p class="mb-1"><strong>DEA Number:</strong> <%= @provider.dea_number%></p>
						<p class="mb-1"><strong>DEA Registration State:</strong> <%= State.find_by(id: @provider.dea_registration_state)&.name %></p>
						<p class="mb-1"><strong>DEA License Effective Date:</strong> <%= @provider.dea_license_effective_date%></p>
						<p class="mb-1"><strong>DEA License Expiration Date:</strong> <%= @provider.dea_license_expiration_date%></p>
            </div>

						<h5 class="text-center my-3">CAQH</h5>
						<p class="mb-1"><strong>CAQH ID:</strong> <%= @provider.caqhid %></p>
						<p class="mb-1"><strong>CAQH Attestation Date:</strong> <%= @provider.caqh_attestation_date %></p>
						<p class="mb-1"><strong>CAQH PDF:</strong> <%= @provider&.caqh_pdf&.blank? ? 'None' : 'Yes' %></p>
						<p class="mb-1"><strong>CAQH Username:</strong> <%= @provider.caqh_username %></p>
						<p class="mb-1"><strong>CAQH Password:</strong> <%= @provider.caqh_password %></p>
						<p class="mb-1"><strong>CAQH State:</strong> <%= @provider.caqh_state %></p>
						
						<h5 class="text-center my-3">Telehealth</h5>
						<p class="mb-1"><strong>Telehealth Number:</strong> <%= @provider.telehealth_license_number %> </p>
						<p class="mb-1"><strong>License Registered State:</strong></p>
					</div>

					<div class="card rounded shadow-lg p-1 px-3 mb-3">
          <%= render partial: "global_components/collapsible_sidebar_header", locals: {title: 'Group', collapse_name: 'group'}%>
          <div class="collapsible" style="<%= current_user&.is_card_open?('group') ? '' : 'display: none;' %>">
						<p class="mb-1"><strong>Group Name:</strong> <%= @provider.group&.group_name %></p>
						<p class="mb-1"><strong>Group Code:</strong> <%= @provider.group&.group_code %></p>
						<p class="mb-1"><strong>Office Address:</strong> <%= @provider.group&.office_address %></p>
						<p class="mb-1"><strong>City:</strong> <%= @provider.group&.city %></p>
						<p class="mb-1"><strong>State:</strong> <%= @provider.group&.state %></p>
						<p class="mb-1"><strong>Zip Code:</strong> <%= @provider.group&.zip_code %></p>
						<p class="mb-1"><strong>Telephone Number:</strong> <%= @provider.group&.phone_number %></p>
						<p class="mb-1"><strong>Ext:</strong> <%= @provider.group&.ext %></p>
						<p class="mb-1"><strong>Fax Number:</strong> <%= @provider.group&.fax_number %></p>
					</div>
          </div>

					<div class="card rounded shadow-lg p-1 px-3 mb-3">
          <%= render partial: "global_components/collapsible_sidebar_header", locals: {title: 'DCO/Practice Location', collapse_name: 'practice'}%>
          <div class="collapsible" style="<%= current_user&.is_card_open?('practice') ? '' : 'display: none;' %>">
						<p class="mb-1"><strong>Name:</strong> </p>
						<p class="mb-1"><strong>Address:</strong> </p>
						<p class="mb-1"><strong>City:</strong> <%= @provider&.city %> </p>
						<p class="mb-1"><strong>State:</strong> <%= @provider&.state %> </p>
						<p class="mb-1"><strong>Zip Code:</strong>  </p>
						<p class="mb-1"><strong>Country:</strong>  </p>
						<p class="mb-1"><strong>Service Location Phone:</strong> <%= @provider&.telephone_number %>  </p>
						<p class="mb-1"><strong>Panel Status to New Patients:</strong>  </p>
						<p class="mb-1"><strong>Include in Directory?</strong>  </p>
						<p class="mb-1"><strong>Is this location an inpatient facility?</strong>  </p>
						<p class="mb-1"><strong>Is this location a clinic?</strong>  </p>
						<p class="mb-1"><strong>Are Telehealth services provided?</strong>  </p>
					</div>
          </div>

						<div class="card rounded shadow-lg p-1 px-3 mb-3">
          <%= render partial: "global_components/collapsible_sidebar_header", locals: {title: 'Others', collapse_name: 'other'}%>
          <div class="collapsible" style="<%= current_user&.is_card_open?('other') ? '' : 'display: none;' %>">
						<p class="mb-1"><strong>Hire date of provider seeing patients:</strong><%= @provider&.provider_hire_date_seeing_patient %> </p>
						<p class="mb-1"><strong>Effective date of provider seeing patients:</strong> <%= @provider&.effective_date_seeing_patient %> </p>
						<p class="mb-1"><strong>Are you employed by other groups or facilities:</strong> <%= @provider&.employed_by_other %>  </p>
						<p class="mb-1"><strong>Have you gone recently through revalidation with any payor:</strong> <%= @provider&.revalidation %>  </p>
						<p class="mb-1"><strong>Does the provider require to work under a supervising licensed psychologist:</strong> <%= @provider&.supervised_by_psychologist %>  </p>
						
							<h5 class="text-center my-3">Admitting Privileges</h5>
						<p class="mb-1"><strong>Admitting Physician/Practice/Clinic/Group:</strong>  </p>
						<p class="mb-1"><strong>Facility Name:</strong> <%= @provider&.facility_name %> </p>
						<p class="mb-1"><strong>Facility Location:</strong> <%= @provider&.facility_location %>  </p>
						<p class="mb-1"><strong>Address Line 1:</strong> <%= @provider&.admitting_facility_address_line1 %>   </p>
						<p class="mb-1"><strong>Address Line 2:</strong>  <%= @provider&.admitting_facility_address_line1 %>  </p>
						<p class="mb-1"><strong>City:</strong> <%= @provider&.admitting_facility_city %>  </p>
						<p class="mb-1"><strong>State:</strong>  </p>
						<p class="mb-1"><strong>Zip Code:</strong> <%= @provider&.admitting_facility_zip_code %>  </p>
						<p class="mb-1"><strong>Admitting Arrangements:</strong> <%= @provider&.admitting_facility_arrangments %> </p>
					</div>
          </div>

					<div class="card rounded shadow-lg p-1 px-3 mb-3">
          <%= render partial: "global_components/collapsible_sidebar_header", locals: {title: 'Uploaded Documents', collapse_name: 'documents'}%>
          <div class="collapsible" style="<%= current_user&.is_card_open?('documents') ? '' : 'display: none;' %>">
						<p>
							<label for="">School Certificate</label>
							<%= HtmlUtils.generate_view_link file_url: @provider.school_certificate.url %>
						</p>
						<p>
							<label for="">Practice Location</label>
							<%= HtmlUtils.generate_view_link file_url: @provider.dco_file.url %>
						</p>
            </div>
					</div>

					<div class="card rounded shadow-lg p-1 px-3 mb-3">
          <%= render partial: "global_components/collapsible_sidebar_header", locals: {title: 'Enrollments', collapse_name: 'enrollments'}%>
          <div class="collapsible" style="<%= current_user&.is_card_open?('enrollments') ? '' : 'display: none;' %>">
						<% @provider.enrollments.each do |enrollment| %>
						<p><%= enrollment.enrollment_payer %></p>
						<% end %>
            </div>
					</div>

					<div class="card rounded shadow-lg p-1 px-3 mb-3  pb-5">
						<h3 class="text-center my-3">Comments</h3>
						<% @provider.comments.each do |comment|%>
              <%= render partial: 'comments/comment', locals: {comment: comment}%>
            <% end %>
            <%= render partial: 'comments/form'%>
					</div>
				</div>
			</div>
</div>

		</div>
	</div>


<% content_for :js do %>
<script>
	if($('body.navbar-vertical-aside-mini-mode').length == 0){
		setTimeout(function () {$('#navbar-aside-toggler').click();}, 1000);
	}
</script>
<% end %>