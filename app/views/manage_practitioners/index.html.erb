<div class="content container-fluid">
	<%= render partial: "verification_platform/encompass_nav"%>
</div>
<%= render 'user_restriction', locals: { access_key: 'Manage Practitioner' } do %>
	<div class="enc-content">
		<div class="container-fluid">
			<div class="row">
				<div class="col-xl-3">
				  <%= render partial: "verification_platform/encompass_sidebar"%>
				</div>
				<div class="col-xl-9">
					<div class="row mt-3">
						<div>
							<%= link_to "Display All", '#', class: 'btn btn-primary btn-sm mb-1', id: 'display-all-btn' %>
							<%= link_to "New", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Query", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Delete Condition", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Save Condition", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Generate Client Report", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Report Library", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Update Affilation Status", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Update Privilege Item Status", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Letter Library", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Lable Library", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Pick List", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Application Library", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
							<%= link_to "Meeting Attendance Profile", 'javascrript:void(0)', class: 'btn btn-primary btn-sm mb-1' %>
						</div>
					</div>
					<div class="row mt-3">
						<div class="col-xl-6">
							<div class="form-control  border-dark enc-search-wrp">
								<input type="text" class="enc-search-input" placeholder="Search by Committee Date">
								<%# <i class='bx bx-search'></i> %>
							</div>
						</div>
					</div>
					<table class="table table-bordered practice-table mt-3">
						<thead>
							<tr>
								<th  class="text-white" scope="col">Practitioner Name</th>
								<th class="text-white">Committee Date</th>
								<th class="text-white">Verification Status</th>
								<th class="text-white">Practitioner SSN</th>
							</tr>
						</thead>
						<tbody>
							<% @practitioners.each do |practitioner| %>
								<tr>
									<td><%= link_to practitioner.practitioner_name, manage_practitioner_path(practitioner) %></td>
									<td><%= practitioner.credentials_committee_date %></td>
									<td><%= practitioner.status %></td>
									<td><%= practitioner.social_security_number %></td>
								</tr>
							<% end %>
						</tbody>
					</table>
					<% if @practitioner %>
						<div class="col-lg-12">
							<div class="d-flex justify-content-between bg-medium-grey rounded align-items-center py-0">
								<div class="page_info ms-3 text-black">
									 <%= page_entries_info @practitioner %>
								</div>
								<% if params[:per_page ].present? %>
									<%= will_paginate @practitioner, :params =>  {per_page: @per_page }, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
								<% else %>
									<%= will_paginate @practitioner, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
								<% end %>
							</div>
						</div>
					<% end %>
				</div>
			</div>
		</div>
	</div>
<% end %>

<script type="text/javascript">
	document.getElementById('display-all-btn').addEventListener('click', function(e) {
    e.preventDefault();

    // Fetch all practitioners
    fetch('<%= url_for(action: :index, display_all: true) %>', {
      method: 'GET',
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      }
    })
    .then(response => response.text())
    .then(html => {
      // Replace the table content
      document.getElementById('practitioner-table').innerHTML = html;
    });
  });
</script>