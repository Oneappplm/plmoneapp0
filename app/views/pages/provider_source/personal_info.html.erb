<div class="content container-fluid ps-0">
   <%= render "provider_source_components/top_buttons"%>
   <div class="row">
      <div class="col-lg-3">
         <%= render "provider_source_components/sub_navbar"%>
      </div>
      <div class="col-lg-9">
         <div class="row border border-4 p-3">
            <!-- start of form header -->
            <div class="col-lg-12">
               <div class="d-flex gap-2">
                  <span class="bg-medium-grey circle d-flex justify-content-center align-items-center" style="width: 40px;height: 40px;">
                  <i class="bi bi-person-plus-fill text-white" style="font-size: 25px;"></i>
                  </span>
                  <div class="d-flex flex-column">
                     <label class="text-dark-grey">General Information	</label>
                     <small>Please fill out 	all required fields</small>
                  </div>
               </div>
            </div>
            <%= render partial: "provider_source_components/progress_bar", locals: {percent: (@provider.general_information_progress)}%>
            <% steps = [['NAME AND HOME ADDRESS','finished', custom_provider_source_path], ['PERSONAL INFORMATION', 'active', custom_provider_source_path(page: 'personal_info')]]%>
            <%= render partial: "provider_source_components/form_wizard", locals: {steps: steps}%>
            <div class="col-lg-12 my-3">
               <form>
                  <div class="row mb-3">
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Gender*</label>
                        <select name="ps-gender" class="form-select border-dark">
                           <option value="male">Male</option>
                           <option value="female">Female</option>
                           <option value="non-binary">Non-binary</option>
                           <option value="x">X</option>
                        </select>
                     </div>
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Date for Birth*</label>
                        <input name="ps-dob" type="date" class="form-control border-dark" name="">
                     </div>
                  </div>
                  <div class="row mb-3">
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Citizenship*</label>
                        <div class="single-select form-select border-dark" name="ps-citizenship" id="ps-citizenship" placeholder="Select Option "></div>
                     </div>
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Country of Birth</label>
                        <div class="single-select form-select border-dark" name="ps-cob" id="ps-cob" placeholder="Select Option" "></div>
                     </div>

                  </div>
                  <div class="row mb-3">
                     <div class="d-flex justify-content-between ">
                        <label class="text-dark-grey">Do you have a Social Security Number?</label>
                        <div class="d-flex me-4 gap-2">
                           <span>
                           <input type="radio" value="yes" name="ps-ssn">
                           <span>YES</span>
                           </span>
                           <span>
                           <input type="radio" value="no" name="ps-ssn">
                           <span>NO</span>
                           </span>
                        </div>
                     </div>
                     <div class="col-lg-12 d-none" id="ssn_field">
                        <label class="text-dark-grey">Social Security Number*</label>
                        <input type="text" name="social-security-number" id="social-security-number" class="form-control border-dark">
                     </div>
                  </div>
                  <hr>
                  <div class="row mb-3">
                     <div class="d-flex justify-content-between ">
                        <label class="text-dark-grey">Do you have a legal right to reside in the United States?*</label>
                        <div class="d-flex me-4 gap-2">
                           <span>
                           <input type="radio" value="yes" name="reside-on-us">
                           <span>YES</span>
                           </span>
                           <span>
                           <input type="radio" value="no" name="reside-on-us">
                           <span>NO</span>
                           </span>
                        </div>
                     </div>
                  </div>
                  <div class="row mb-3">
                     <div class="d-flex justify-content-between ">
                        <label class="text-dark-grey">Do you have a legal right to work in the United States*</label>
                        <div class="d-flex me-4 gap-2">
                           <span>
                           <input type="radio" value="yes" name="work-on-us">
                           <span>YES</span>
                           </span>
                           <span>
                           <input type="radio" value="no" name="work-on-us">
                           <span>NO</span>
                           </span>
                        </div>
                     </div>
                  </div>
                  <div class="row mb-3">
                     <div class="d-flex justify-content-between ">
                        <label class="text-dark-grey">Do you hold a permanent work permit?*</label>
                        <div class="d-flex me-4 gap-2">
                           <span>
                           <input type="radio" value="yes" name="permanent-work-permit">
                           <span>YES</span>
                           </span>
                           <span>
                           <input type="radio" value="no" name="permanent-work-permit">
                           <span>NO</span>
                           </span>
                        </div>
                     </div>
                  </div>
                  <div class="row mb-3">
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Foreign National Identification Number</label>
                        <input type="text" name="foreign-national-identification-number" class="form-control border-dark">
                     </div>
                     <div class="col-lg-6">
                        <label class="text-dark-grey">FNIN Country of Issue</label>
                        <div class="single-select form-select border-dark" name="fnin-country-of-issue" id="fnin-country-of-issue" placeholder="Select Option "></div>
                     </div>
                  </div>
                  <div class="row mb-3">
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Visa Number</label>
                        <input type="text" name="visa-number" class="form-control border-dark">
                     </div>
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Visa Type</label>
                           <div class="select form-select border-dark" name="gi-visa-types" id="gi-visa-types" placeholder="Select Option "></div>
                     </div>
                  </div>
                  <div class="row mb-3">
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Visa Status</label>
                        <select name="visa-status" class="form-select border-dark">
                           <option selected="selected" value=""></option>
                           <option value="In Status">In Status</option>
                           <option value="Out of Status">Out of Status</option>
                        </select>
                     </div>
                  </div>
                   <div class="row mb-3">
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Visa Issue Date </label>
                        <input name="ps-vid" type="date" class="form-control border-dark" name="">
                     </div>
                    <div class="col-lg-6">
                        <label class="text-dark-grey">Visa Expiration Date </label>
                        <input name="ps-ved" type="date" class="form-control border-dark" name="">
                     </div>
                  </div>
                  <div class="row my-3">
                     <div class="col-lg-12">
                        <label class="text-dark-grey">Please select all the languages you speak *</label>
                        <!-- multi-select -->
                       <div class="multi-select form-select border-dark" name="languages-you-speak" id="multi-select-lang-speak" placeholder="Select Option "></div>
                     </div>
                  </div>
                  <div class="row my-3">
                     <div class="col-lg-12">
                        <label class="text-dark-grey">Please select all the languages you write *</label>
                        <div class="multi-select form-select border-dark" name="languages-you-write" id="multi-select-lang-write" placeholder="Select Option "></div>
                     </div>
                  </div>
                  <div class="row mb-3">
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Ethnicity*</label>
                        <select class="form-control border-dark" required name="ethnicity">
                           <option value=""></option>
                           <option value="American Indian/Alaska Native American">American Indian/Alaska Native American</option>
                           <option selected="selected" value="Asian/Pacific Islander">Asian/Pacific Islander</option>
                           <option value="Black/African American">Black/African American</option>
                           <option value="Caucasian">Caucasian</option>
                           <option value="Hispanic/Latino">Hispanic/Latino</option>
                           <option value="Not Listed">Not Listed</option>
                        </select>
                     </div>
                     <div class="col-lg-6">
                        <label class="text-dark-grey">Marital Status</label>
                        <select class="form-control border-dark select2" required name="marital-status">
                           <option selected="selected" value=""></option>
                           <option value="Domestic Partner">Domestic Partner</option>
                           <option value="Divorced">Divorced</option>
                           <option value="Married">Married</option>
                           <option value="Single">Single</option>
                           <option value="Widowed">Widowed</option>
                        </select>
                     </div>
                  </div>
                  <div class="row card mb-3 p-3">
                     <div class="col-lg-12">
                        <h4 class="fw-semibold text-secondary mb-3">Emergency Contact</h4>
                        <div class="row mb-3">
                           <div class="col-lg-4">
                              <label class="text-dark-grey">First Name</label>
                              <input type="text" name="emergency-first-name" class="form-control border-dark">
                           </div>
                           <div class="col-lg-4">
                              <label class="text-dark-grey">Middle Name</label>
                              <input type="text" name="emergency-middle-name" class="form-control border-dark">
                           </div>
                           <div class="col-lg-4">
                              <label class="text-dark-grey">Last Name</label>
                              <input type="text" name="emergency-last-name" class="form-control border-dark">
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-lg-12">
                              <label class="text-dark-grey">Emergency Contact Phone Number</label>
                              <input type="text" name="emergency-contact-phone-number" class="form-control border-dark">
                           </div>
                        </div>
                     </div>
                  </div>
               </form>
            </div>
         </div>
      </div>
   </div>
</div>

<script>
   var countries = [];
   var selected_countries = [];

   $(document).ready(function() {
   getCountries('#ps-citizenship');
   getCountries('#ps-cob');
   getCountries('#fnin-country-of-issue');
   });

   function getSelectedCountries(provider_source_id) {
   $.ajax({
      url: '<%= get_selected_countries_path %>',
      method: 'POST',
      data: { authenticity_token: csrfToken, provider_source_id: provider_source_id },
      success: function(data) {
         selected_countries = data['selected_countries'];
      }
   });
   }

   function getCountries() {
   $.ajax({
      url: '<%= get_countries_path %>',
      method: 'GET',
      data: { authenticity_token: csrfToken },
      success: function(data) {
         VirtualSelect.init({
         options: data['countries'],
         ele: '.single-select',
         multiple: false,
         search: true,
         showSelectedOptionsFirst: true,
         selectedValue: selected_countries
         });

      }
   });
   }

   var visa_types = [];
   var selected_visa_types = [];

   $(document).ready(function() {
   getVisaTypes('#gi-visa-types');
   });

   function getSelectedVisaTypes(provider_source_id) {
   $.ajax({
      url: '<%= get_selected_visa_types_path %>',
      method: 'POST',
      data: { authenticity_token: csrfToken, provider_source_id: provider_source_id },
      success: function(data) {
         selected_visa_types = data['selected_visa_types'];
      }
   });
   }

   function getVisaTypes() {
   $.ajax({
      url: '<%= get_visa_types_path %>',
      method: 'GET',
      data: { authenticity_token: csrfToken },
      success: function(data) {
         VirtualSelect.init({
         options: data['visa_types'],
         ele: '.select',
         multiple: false,
         search: true,
         showSelectedOptionsFirst: true,
         selectedValue: selected_visa_types
         });

      }
   });
   }

   var languages = [];
   var selected_languages = [];

   $(document).ready(function() {
   getLanguages('#multi-select-lang-speak');
   getLanguages('#multi-select-lang-write');
   });

   function getSelectedLanguages(provider_source_id) {
   $.ajax({
      url: '<%= get_selected_languages_path %>',
      method: 'POST',
      data: { authenticity_token: csrfToken, provider_source_id: provider_source_id },
      success: function(data) {
         selected_languages = data['selected_languages'];
      }
   });
   }

   function getLanguages() {
   $.ajax({
      url: '<%= get_languages_path %>',
      method: 'GET',
      data: { authenticity_token: csrfToken },
      success: function(data) {
         VirtualSelect.init({
         options: data['languages'],
         ele: '.multi-select',
         multiple: true,
         search: true,
         showSelectedOptionsFirst: true,
         selectedValue: selected_languages
         });
      }
   });
   }

   $('input[name="ps-ssn"]').on('change',function(){
       $(this).val() == 'yes' ? $('#ssn_field').removeClass('d-none') : $('#ssn_field').addClass('d-none');
   });
</script>

<style>
  .multi-select {
    padding: 0;
  }
  .single-select {
        width: 100%; 
        max-width: 500px; 
   }
  .select {
        width: 100%; 
        max-width: 500px;
        padding: 0;
   }
</style>
