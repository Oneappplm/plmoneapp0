<div class="container mt-3">
  <h2>Upload CSV File</h2>

  <%= form_with url: process_csv_mhc_client_portal_index_path, local: true, multipart: true do |form| %>
    <div class="form-group">
      <%= form.label :file, "Select CSV File" %>
      <%= form.file_field :file, accept: ".csv", class: 'form-control mt-2 mb-2' %>
    </div>

    <div>
      <%= form.submit "Upload and Process", class: 'btn btn-primary fw-bold mt-2 btn-sm' %>
      <%= link_to "Clear CSV Data", clear_csv_mhc_client_portal_index_path, method: :delete, class: 'btn btn-danger fw-bold mt-2 btn-sm' %>
      <%= link_to "Back to Search", mhc_client_portal_index_path, class: 'btn btn-warning fw-bold mt-2 btn-sm' %>
    </div>
  <% end %>

  <% if @csv_data.present? %>
    <div class="row">
      <div class="col-lg-6">
        <h3 class="mt-3">Uploaded CSV Data</h3>
      </div>
      <div class="col-lg-6">
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <%= link_to "Download CSV", download_csv_mhc_client_portal_index_path, class: 'btn btn-success fw-bold mt-2 mb-2 btn-sm' %>
        </div>
      </div>
    </div>

    <table class="table table-bordered">
      <thead>
        <tr>
          <% @csv_data.first.keys.each do |header| %>
            <th class="text-white fw-bold"><%= header %></th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <% @csv_data.each do |row| %>
          <tr>
            <% row.each_value do |value| %>
              <td><%= value %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p class="mt-3">No CSV data uploaded yet.</p>
  <% end %>
</div>