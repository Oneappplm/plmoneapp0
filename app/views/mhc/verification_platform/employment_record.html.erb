 <div class="enc-content">
        <div class="container">
            <%= render "top_nav_buttons"%>
          
            <div class="add-license-content mt-4">
                <div class="row">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center gap-3">
                            <!-- <a href="" class="link-back">
                                <i class='bx bx-left-arrow-alt' ></i>
                            </a> -->
                            <h4 class="page-heading">Employment Record 1</h4>
                            <button type="button" class="btn btn-primary py-1" id="prac-info-btn-edit">
                                Edit
                            </button>
                            <div class="d-flex align-items-center gap-3">
                                <button type="submit" class="btn btn-save" id="prac-info-btn-save">
                                    Save Changes
                                </button>
                                <button type="button" class="btn btn-cancel" id="prac-info-btn-cancel">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3 d-flex page-applicable align-items-center gap-2 mb-2">
                        <button class="btn btn-primary py-1 page-applicable" data-bs-toggle="modal"
                            data-bs-target="#verifLetterModal">
                            Verification Letter
                        </button>
                        <button class="btn btn-primary py-1 page-applicable">
                            Send Contact
                        </button>
                    </div>
                    <div class="mt-3 row page-applicable">
                        <div class="col-xl-5">
                            <div class="left-pane">
                                <h6 class="offset-md-5">RVA Information</h6>
                                <div class="form-row row mt-4">
                                    <div class="col-xl-4">
                                        <button class="btn btn-pane">
                                            Request
                                        </button>
                                    </div>
                                    <div class="col-xl-4">
                                        <button class="btn btn-pane">
                                            Verification
                                        </button>
                                    </div>
                                    <div class="col-xl-4">
                                        <button class="btn btn-pane">
                                            Audit
                                        </button>
                                    </div>
                                </div>
                                <div class="form-row row mt-2">
                                    <div class="col-xl-6">
                                        <button class="btn btn-primary btn-audit btn-sm" data-bs-toggle="modal" data-bs-target="#QAModal" data-information-id="<%= @last_rva_information&.id %>" data-first-name="<%= @provider_personal_information&.first_name %>" data-last-name="<%= @provider_personal_information&.last_name %>" data-personal-information-id="<%= @provider_personal_information&.id %>" data-employment-id = "<%= @provider_employment.id%>">
                                              Quality Audit
                                        </button>
                                    </div>
                                      <div class="col-12 m-2">
                                          <button class="btn btn-primary btn-sm" style="min-width: 100px; font-size: 12px" data-information-id="<%= @last_rva_information&.id %>" data-personal-information-id="<%= @provider_personal_information&.id %>" data-employment-id = "<%= @provider_employment.id%>" id="skip-rva-btn">
                                              Skip RVA
                                          </button>
                                      </div>
                                    <div class="col-xl-6">
                                        <button class="btn btn-pane">
                                            Skip RVA
                                        </button>
                                    </div>
                                    <div class="col-12 m-2">
                                      <button class="btn text-danger <%= @employment_rva_information_completed.present? ? '' : 'd-none' %>" data-bs-toggle="modal" data-bs-target="#QAModal" data-information-id="<%= @last_rva_information&.id %>" data-first-name="<%= @provider_personal_information&.first_name %>" data-last-name="<%= @provider_personal_information&.last_name %>" data-personal-information-id="<%= @provider_personal_information&.id %>" id="re-rva">
                                        Need ReRVA
                                      </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-7">
                            <div class="right-pane">
                                <div class="d-flex align-items-center justify-content-between">
                                    <h6 class="offset-md-5">Message Board</h6>
                                    <button class="btn btn-primary py-1" data-bs-toggle="modal"
                                        data-bs-target="#addCommentModal">
                                        Add Comment
                                    </button>
                                </div>
                                <div class="form-row mt-2">
                                    <span class="btn span-pane" data-bs-toggle="modal"
                                        data-bs-target="#deleteCommentModal">
                                        Subject: Incomplete Record
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                      <%= form_with model: @provider_employment, url: @provider_employment.persisted? ? mhc_provider_employment_path(@provider_employment) : mhc_provider_employments_path, method: @provider_employment.persisted? ? :patch : :post, local: true do |f| %>
                        <%= f.hidden_field :provider_attest_id %>

                        <div class="form-row row mt-3">
                          <div class="col-xl-6">
                            <label for="employer_name">Practice/Employer Name:</label>
                            <%= f.text_field :employer_name, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-6">
                            <label for="title">Contact/Supervisor Title:</label>
                            <%= f.select :title, options_for_select(["Dr", "Madam", "Maj", "Miss", "Mr", "Mrs", "Ms", "Sir"]), { prompt: "Select option" }, class: "form-select" %>
                          </div>
                        </div>

                        <div class="form-row row">
                          <div class="col-xl-3">
                            <label for="contact_first_name">Contact/Supervisor First Name:</label>
                            <%= f.text_field :contact_first_name, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-3">
                            <label for="contact_middle_name">Middle Name:</label>
                            <%= f.text_field :contact_middle_name, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-3">
                            <label for="contact_last_name">Last Name:</label>
                            <%= f.text_field :contact_last_name, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-3">
                            <label for="contact_suffix">Suffix:</label>
                            <%= f.select :contact_suffix, options_for_select(["Sr.", "Jr.", "I", "II", "III", "IV", "V", "VI", "VII"]), { prompt: "Select option" }, class: "form-select" %>
                          </div>
                        </div>

                        <div class="form-row row mt-3">
                          <div class="col-xl-6">
                            <label for="practitioner_type">Practitioner Type:</label>
                            <%= f.text_field :practitioner_type, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-6">
                            <label for="address">Address:</label>
                            <%= f.text_field :address, class: "form-control", placeholder: "Type here..." %>
                          </div>
                        </div>

                        <div class="form-row row">
                          <div class="col-xl-6">
                            <label for="mail_stop">Mail Stop:</label>
                            <%= f.text_field :mail_stop, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-6">
                            <label for="additional_address">Additional Address:</label>
                            <%= f.text_field :additional_address, class: "form-control", placeholder: "Type here..." %>
                          </div>
                        </div>

                        <div class="form-row row">
                          <div class="col-xl-4">
                            <label for="city">City:</label>
                            <%= f.text_field :city, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-4">
                            <label for="county">County:</label>
                            <%= f.text_field :county, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-4">
                            <label for="state">State:</label>
                            <%= f.text_field :state, class: "form-control", placeholder: "Type here..." %>
                          </div>
                        </div>

                        <div class="form-row row">
                          <div class="col-xl-4">
                            <label for="country">Country:</label>
                            <%= f.text_field :country, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-4">
                            <label for="zip">ZIP Code:</label>
                            <%= f.text_field :zip, class: "form-control", placeholder: "Type here..." %>
                          </div>
                        </div>

                        <div class="form-row row mt-3">
                          <div class="col-xl-4">
                            <label for="phone_number">Phone Number:</label>
                            <%= f.text_field :phone_number, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-4">
                            <label for="fax">Fax:</label>
                            <%= f.text_field :fax, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-4">
                            <label for="email">Email:</label>
                            <%= f.email_field :email, class: "form-control", placeholder: "Type here..." %>
                          </div>
                        </div>

                        <div class="form-row row mt-3">
                          <div class="col-xl-6">
                            <label for="work_status">Work Status:</label>
                            <%= f.text_field :work_status, class: "form-control", placeholder: "Type here..." %>
                          </div>
                          <div class="col-xl-6">
                            <label for="population_serviced">Population Serviced:</label>
                            <%= f.text_field :population_serviced, class: "form-control", placeholder: "Type here..." %>
                          </div>
                        </div>

                        <div class="form-row row mt-3">                        
                          <div class="col-xl-6">
                            <label for="contact_method">Contact Method:</label>
                            <%= f.select :contact_method, options_for_select(["Fax", "Email", "Letter"]), { prompt: "Select option" }, class: "form-select" %>
                          </div>
                        </div>

                        <div class="form-row row mt-3">
                          <div class="col-xl-6">
                            <label for="from_date">From:</label>
                            <%= f.date_field :from_date, class: "form-control" %>
                          </div>
                          <div class="col-xl-6">
                            <label for="to_date">To:</label>
                            <%= f.date_field :to_date, class: "form-control" %>
                          </div>
                        </div>

                        <div class="form-row row mt-3">
                          <div class="col-xl-6">
                            <label for="position">Position:</label>
                            <%= f.text_field :position, class: "form-control", placeholder: "Type here..." %>
                          </div>
                        </div>

                        <div class="form-row row mt-2">
                          <div class="col-xl-6">
                            <label>Show on Tickler?</label>
                            <div class="form-check">
                              <%= f.radio_button :show_on_tickler, true, class: "form-check-input" %>
                              <label class="form-check-label">Yes</label>
                            </div>
                            <div class="form-check">
                              <%= f.radio_button :show_on_tickler, false, class: "form-check-input" %>
                              <label class="form-check-label">No</label>
                            </div>
                          </div>
                        </div>

                        <div class="form-row row mt-2">
                          <div class="col-xl-12">
                            <label for="comments">Please List any comments</label>
                            <%= f.text_area :comments, class: "form-control", placeholder: "Type here..." %>
                          </div>
                        </div>

                        <div class="form-row mt-1 d-flex justify-content-end">
                          <%= f.submit "Save", class: "btn btn-primary" %>
                        </div>
                      <% end %>
                      <% if @provider_employment.persisted? %>
                        <div class="col-12 text-left" style="margin-top: 10px;">
                            <%= button_to 'Delete', 
                                mhc_provider_employment_path(@provider_employment), 
                                method: :delete, 
                                data: { confirm: 'Are you sure you want to delete this training detail?' }, 
                                class: 'btn btn-danger', 
                                style: 'width: 200px;' %>
                        </div>
                    <% end %>
                </div>
            </div>
        </div>
    </div>

        <!-- Add Comment Modal -->
        <div class="modal fade" id="addCommentModal" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="content">
                            <div class="modal-title">
                                <h6 class="offset-md-5">Add Comment</h6>
                                <button class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
                            </div>
                            <form action="">
                                <div class="form-row mt-3">
                                    <label for="">Subject:</label>
                                    <input type="text" class="form-control">
                                </div>
                                <div class="form-row">
                                    <label for="">Message:</label>
                                    <textarea name="" id="" cols="30" rows="5" class="form-control"></textarea>
                                </div>
                            </form>
                            <div class="form-row mt-3 d-flex justify-content-center">
                                <button class="btn btn-primary py-1">Post Comment</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Delete Comment Modal -->
        <div class="modal fade" id="deleteCommentModal" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="content">
                            <div class="modal-title">
                                <h6 class="offset-md-5">Comment</h6>
                                <button class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
                            </div>
                            <form action="">
                                <div class="form-row mt-3">
                                    <label for="">Subject:</label>
                                    <input type="text" class="form-control">
                                </div>
                                <div class="form-row">
                                    <label for="">Message:</label>
                                    <textarea name="" id="" cols="30" rows="5" class="form-control"></textarea>
                                </div>
                            </form>
                            <div class="form-row mt-3 d-flex justify-content-center">
                                <button class="btn btn-red">Delete Comment</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quality Audit Modal -->
            <div class="modal fade" id="QAModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-body">
                    <div id="qaModalMessage" class="alert alert-info d-none"></div>
                    <div class="content">
                      <div class="modal-title">
                        <h6 class="">Quality Audit</h6>
                        <button class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
                      </div>
                      <%= form_with model: @rva_information, url: mhc_verification_platform_generate_rva_information_path, method: :post, id: 'audit-form' do |f| %>

                        <%= hidden_field_tag :id, @last_rva_information&.id %>
                        <%= hidden_field_tag :personal_info_id %>
                        <%= hidden_field_tag :practice_employment_id %>

                        <%= hidden_field_tag :first_name %>
                        <%= hidden_field_tag :last_name %>
                        <div class="form-row row mt-3">
                          <div class="col-xl-12">
                            <div class="card other-name-card">
                              <div class="card-header bg-secondary rounded-0">
                                <h6 class="form-heading text-white">Request</h6>
                              </div>
                              <div class="card-body">
                                <div class="d-flex justify-content-end gap-2">
                                  <button class="btn btn-primary py-1" type="button">View Request History</button>
                                  <button class="btn btn-primary py-1" type="button">View Webcrawler Image Archive</button>
                                </div>
                                <hr class="form-hr">
                                <div class="row pt-3 pb-3">
                                  <div class="col-md-6">
                                    <button class="btn btn-sm btn-light <%= @last_rva_information.present? ? '' : 'btn-disabled' %>" 
                                            id="send-request-btn" 
                                            <%= 'disabled' if @last_rva_information.present? %>>
                                      Send Request
                                    </button>
                                  </div>
                                  <div class="col-md-6">
                                    <span class="font-bold sent-request" style="line-height: 38px;"><%= @last_rva_information&.send_request %></span>
                                  </div>
                                </div>
                                <hr class="form-hr">
                                <div class="row">
                                  <div class="col-md-6">
                                    <label for="">Requested By:</label>
                                  </div>
                                  <div class="col-md-6">
                                    <span class="font-bold requested-by"><%= @last_rva_information&.requested_by %></span>
                                  </div>
                                </div>
                                <hr class="form-hr">
                                <div class="row">
                                  <div class="col-md-6">
                                    <label for="">Requested Date:</label>
                                  </div>
                                  <div class="col-md-6">
                                    <span class="font-bold requested-date"><%= @last_rva_information&.requested_date %></span>
                                  </div>
                                </div>
                                <hr class="form-hr">
                                <div class="form-row d-flex align-items-center gap-3">
                                  <label for="">Requested Method:</label>
                                  <%= f.radio_button :requested_method, 'AutoFax', id: 'method-autofax', checked: (@last_rva_information.present? && @last_rva_information.requested_method == "AutoFax") %>
                                  <label class="form-check-label" for="method-autofax">AutoFax</label>
  
                                  <%= f.radio_button :requested_method, 'E-Mail', id: 'method-email', checked: (@last_rva_information.present? && @last_rva_information.requested_method == "E-Mail") %>
                                  <label class="form-check-label" for="method-email">E-Mail</label>
  
                                  <%= f.radio_button :requested_method, 'Letter', id: 'method-letter', checked: (@last_rva_information.present? && @last_rva_information.requested_method == "Letter") %>
                                  <label class="form-check-label" for="method-letter">Letter</label>
  
                                  <%= f.radio_button :requested_method, 'Phone', id: 'method-phone', checked: (@last_rva_information.present? && @last_rva_information.requested_method == "Phone") %>
                                  <label class="form-check-label" for="method-phone">Phone</label>
  
                                  <%= f.radio_button :requested_method, 'Website', id: 'method-website', checked: (@last_rva_information.present? && @last_rva_information.requested_method == "Website") %>
                                  <label class="form-check-label" for="method-website">Website</label>
                                </div>
                                <span>The default contact method is letter.</span>
                                <hr class="form-hr">
                                <div class="form-row row">
                                  <div class="col-xl-6">
                                    <%= f.label :required_fee_amount, "Required Fee Amount:" %>
                                    <%= f.text_field :required_fee_amount, 
                                    class: 'form-control req-fee-amount', 
                                    placeholder: "Type here...", 
                                    value: @last_rva_information&.required_fee_amount, 
                                    disabled: true %>
                                  </div>
                                  <div class="col-xl-6">
                                    <%= f.label :check_payable_to, "Check Payable To:" %>
                                    <%= f.text_field :check_payable_to, 
                                    class: 'form-control', 
                                    placeholder: "Type here...", 
                                    value: @last_rva_information&.check_payable_to, 
                                    disabled: true %>
                                  </div>
                                </div>
                                <hr class="form-hr">
                                <div class="form-row mt-2">
                                  <%= f.check_box :include_delineation, 
                                    id: 'inc-delineation-check', 
                                    value: "Include Delineation of Privileges", 
                                    checked: @last_rva_information&.include_delineation == true %>
                                  <%= f.label :include_delineation, "Include Delineation of Privileges", for: 'inc-delineation-check' %>
                                </div>
                                <hr class="form-hr">
                                <div class="form-row d-flex align-items-center gap-3">
                                  <label for="">Check has generated?</label>
                                  <%= f.radio_button :check_generated, 'true', 
                                        id: 'check-generate-yes', 
                                        disabled: true, 
                                        checked: @last_rva_information&.check_generated == true %>
                                  <label for="check-generate-yes">Yes</label>
                                  <%= f.radio_button :check_generated, 'false', 
                                                id: 'check-generate-no', 
                                                disabled: true, 
                                                checked: @last_rva_information&.check_generated == false %>
                                  <label for="check-generate-no">No</label>
                                </div>
                                <hr class="form-hr">
                                <div class="form-row d-flex align-items-center gap-3">
                                  <label for="">Received Status:</label>
                                  <%= f.radio_button :received_status, 'Yes', 
                                        id: 'received-status-yes', 
                                        disabled: true, 
                                        checked: @last_rva_information&.received_status == 'Yes' %>
                                  <label for="received-status-yes">Yes</label>
                                  <%= f.radio_button :received_status, 'No', 
                                          id: 'received-status-no', 
                                          disabled: true, 
                                          checked: @last_rva_information&.received_status == 'No' %>
                                  <label for="received-status-no">No</label>
                                </div>
                                <hr class="form-hr">
                                <div class="row">
                                  <div class="col-md-6">
                                    <label for="">Received by:</label>
                                  </div>
                                  <div class="col-md-6">
                                    <span class="font-bold received-by">
                                        <%= @last_rva_information&.received_by.presence || ' ' %>
                                      </span>
                                  </div>
                                </div>
                                <hr class="form-hr">
                                <div class="row">
                                  <div class="col-md-6">
                                    <label for="">Received date:</label>
                                  </div>
                                  <div class="col-md-6">
                                    <span class="font-bold received-date">
                                       <%= @last_rva_information&.received_date.presence || ' ' %>
                                    </span>
                                  </div>
                                </div>
                                <hr class="form-hr">
                                <div class="form-row">
                                  <%= f.label :comments, "Comments:" %>
                                  <%= f.text_area :comments, rows: 3, class: 'form-control request-comment', value: @last_rva_information&.comments%>
                                </div>
                                <div class="form-row d-flex justify-content-end gap-2 mt-3">
                                  <button class="btn btn-primary py-1" type="button">View Received Images</button>
                                  <button class="btn btn-primary py-1" type="button" <%= 'disabled' if @last_rva_information.present? %>>Save Request</button>
                                  <button class="btn btn-primary py-1" type="button" <%= 'disabled' if !@last_rva_information.present? %>>Restart Request</button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="form-row row mt-3">
                          <div class="col-xl-12">
                            <div class="card other-name-card">
                              <div class="card-header bg-secondary rounded-0">
                                <h6 class="form-heading text-white">Verification</h6>
                              </div>  
                              <div class="card-body">
                                <div class="form-row row">
                                  <div class="col-md-6">
                                    <%= f.label :source_name, 'Source Name:' %>
                                  </div>
                                  <div class="col-md-6">  
                                    <%= f.select :source_name, options_for_select([
                                      ['Application', 'Application'],
                                      ['Application Supplement', 'Application Supplement'],
                                      ['CURRICULUM VITAE', 'CURRICULUM VITAE'],
                                      ['Employer', 'Employer'],
                                      ['NOT VERIFIED', 'NOT VERIFIED'],
                                      ['THE WORK NUMBER', 'THE WORK NUMBER'],
                                      ['Unable to Verify', 'Unable to Verify']
                                    ], selected: @last_rva_information&.source_name.present? ? @last_rva_information&.source_name : ''), { include_blank: 'Select option' }, class: 'form-select' %>

                                  </div>
                                </div>
                                <hr>
                                <div class="form-row row">
                                  <div class="col-md-6">
                                    <%= f.label :source_date, 'Source Date:' %>
                                  </div>
                                  <div class="col-md-6">  
                                    <%= f.date_field :source_date, required: true, class: "form-control", value: @last_rva_information&.source_date %>
                                  </div>
                                </div>
                                <hr>
                                <div class="form-row row">
                                  <div class="col-md-6">
                                    <%= f.label :status, 'Status:' %>
                                  </div>
                                  <div class="col-md-6">
                                                                        <%= f.select :status, options_for_select([
                                      ['Verified', 'Verified'],
                                      ['N/A', 'N/A'],
                                      ['NO RECORD', 'NO RECORD'],
                                      ['No Review Required', 'No Review Required'],
                                      ['Not Verified', 'Not Verified'],
                                      ['Prefer not to Comment', 'Prefer not to Comment'],
                                      ['Rehire with Reservation', 'Rehire with Reservation'],
                                      ['Rehire without Reservation', 'Rehire without Reservation'],
                                      ['Review Required', 'Review Required'],
                                      ['Unable to Verify', 'Unable to Verify'],
                                      ['Verified from Application', 'Verified from Application'],
                                      ['Verified from Curriculum Vitae', 'Verified from Curriculum Vitae'],
                                      ['Would Not Rehire', 'Would Not Rehire']
                                    ], selected:  @last_rva_information&.status), { include_blank: 'Select option' }, class: 'form-select' %>

                                  </div>
                                </div>
                                <hr>
                                <div class="card">
                                  <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h6 class="form-heading">Adverse Action</h6>
                                    </div>    
                                    <div class="form-row d-flex align-items-center gap-3 mt-1">
                                                                        <%= f.select :adverse_action, options_for_select([
                                      ['None', 'None'],
                                      ['Ability to get along issue', 'Ability to get along issue'],
                                      ['Additional address', 'Additional address'],
                                      ['Address', 'Address'],
                                      ['City', 'City'],
                                      ['Contact source', 'Contact source'],
                                      ['Contact/supervisor name', 'Contact/supervisor name'],
                                      ['Contact/supervisor title', 'Contact/supervisor title'],
                                      ['Country', 'Country'],
                                      ['County', 'County'],
                                      ['Disclosure Response Discrepancy', 'Disclosure Response Discrepancy'],
                                      ['Email address', 'Email address'],
                                      ['Emotional Limitation', 'Emotional Limitation'],
                                      ['Fax number', 'Fax number'],
                                      ['Formal Admonition', 'Formal Admonition'],
                                      ['From date', 'From date'],
                                      ['Gap in employment', 'Gap in employment'],
                                      ['Inadequate attestation response', 'Inadequate attestation response'],
                                      ['Inadequate reason for leaving', 'Inadequate reason for leaving'],
                                      ['Incorrect attestation response', 'Incorrect attestation response'],
                                      ['Mental Limitation', 'Mental Limitation'],
                                      ['No Record', 'No Record'],
                                      ['Other', 'Other'],
                                      ['Other Disciplinary Action', 'Other Disciplinary Action'],
                                      ['Past Substance Abuse', 'Past Substance Abuse'],
                                      ['Phone number', 'Phone number'],
                                      ['Physical Limitation', 'Physical Limitation'],
                                      ['Position', 'Position'],
                                      ['Practice/employer name', 'Practice/employer name'],
                                      ['Prefer not to comment', 'Prefer not to comment'],
                                      ['Present Substance Abuse', 'Present Substance Abuse'],
                                      ['Reason for leaving', 'Reason for leaving'],
                                      ['Record too old to verify', 'Record too old to verify'],
                                      ['Rehire with reservation', 'Rehire with reservation'],
                                      ['Reprimand', 'Reprimand'],
                                      ['State/province', 'State/province'],
                                      ['Suite/dept/mail stop', 'Suite/dept/mail stop'],
                                      ['Suspension', 'Suspension'],
                                      ['Termination', 'Termination'],
                                      ['To date', 'To date'],
                                      ['Unable to verify', 'Unable to verify'],
                                      ['Voluntary Termination to Avoid Action', 'Voluntary Termination to Avoid Action'],
                                      ['Would not rehire', 'Would not rehire'],
                                      ['Zip/postal code', 'Zip/postal code']
                                    ], selected:  @last_rva_information&.adverse_action), { include_blank: 'Select option' }, class: 'form-select' %>
                                    </div>
                                    <div class="form-row row">
                                      <div class="col-xl-6">
                                        <%= f.label :other_details, 'Other:' %>
                                        <%= f.text_area :other_details, rows: 5, class: 'form-control', value: @last_rva_information&.other_details  %>
                                      </div>
                                      <div class="col-xl-6">
                                        <%= f.label :adverse_action_comments, 'Comments:' %>
                                        <%= f.text_area :adverse_action_comments, rows: 5, class: 'form-control', value: @last_rva_information&.adverse_action_comments  %>
                                      </div>
                                    </div>
                                    <div class="form-row d-flex align-items-center gap-2 mt-1">
                                      <%= f.radio_button :adverse_action_status, 'Open', 
                                                        id: 'verif-open', 
                                                        checked: @last_rva_information&.adverse_action_status == 'Open' %>
                                      <%= f.label :adverse_action_status, 'Open', for: 'verif-open' %>
  
                                      <%= f.radio_button :adverse_action_status, 'Close', 
                                                          id: 'verif-close', 
                                                          checked: @last_rva_information&.adverse_action_status == 'Close' %>
                                      <%= f.label :adverse_action_status, 'Close', for: 'verif-close' %>
                                    </div>
  
                                    <div class="form-row d-flex align-items-center gap-2">
                                      <%= f.label :in_good_standing, 'In Good Standing?' %>
  
                                      <%= f.radio_button :in_good_standing, 'Yes', 
                                                          id: 'good-standing-yes', 
                                                          checked: @last_rva_information&.in_good_standing == true %>
                                      <%= f.label :in_good_standing, 'Yes', 
                                                  for: 'good-standing-yes', 
                                                  class: 'form-check-label' %>
  
                                      <%= f.radio_button :in_good_standing, 'No', 
                                                          id: 'good-standing-no', 
                                                          checked: @last_rva_information&.in_good_standing == false %>
                                      <%= f.label :in_good_standing, 'No', 
                                                  for: 'good-standing-no', 
                                                  class: 'form-check-label' %>
                                    </div>
                                  </div>
                                </div>
                                <!-- Verification Errors Section -->
                                <div class="form-row row mt-3">
                                  <div class="col-xl-12">
                                    <div class="card other-name-card">
                                      <div class="card-body">
                                        <h6 class="form-heading">Verification Errors</h6>
                                        <div class="form-row row">
                                          <div class="col-xl-6">
                                            <%= f.label :error_type, 'Error:' %>
                                                                                        <%= f.select :error_type, options_for_select([
                                              ['None', 'None'],
                                              ['Additional Address', 'Additional Address'],
                                              ['Address', 'Address'],
                                              ['City', 'City'],
                                              ['Contact', 'Contact'],
                                              ['Country', 'Country'],
                                              ['County', 'County'],
                                              ['Detailed Attestation Explanation Missing', 'Detailed Attestation Explanation Missing'],
                                              ['Fax', 'Fax'],
                                              ['From', 'From'],
                                              ['Gap in Employment', 'Gap in Employment'],
                                              ['Incorrect Attestation Response', 'Incorrect Attestation Response'],
                                              ['No Record Found', 'No Record Found'],
                                              ['Other', 'Other'],
                                              ['Phone', 'Phone'],
                                              ['Position', 'Position'],
                                              ['Practice Name', 'Practice Name'],
                                              ['Reason for Leaving', 'Reason for Leaving'],
                                              ['Record too Old', 'Record too Old'],
                                              ['State/Province', 'State/Province'],
                                              ['Suite/Apt/Mail Stop', 'Suite/Apt/Mail Stop'],
                                              ['To', 'To'],
                                              ['To Present Or Not', 'To Present Or Not'],
                                              ['Zip/Postal Code', 'Zip/Postal Code']
                                            ], selected: @last_rva_information&.error_type || 'None'), { include_blank: 'Select option' }, class: 'form-select' %>
                                          </div>
                                          <div class="col-xl-6">
                                            <%= f.label :error_comments, 'Comments:' %>
                                            <%= f.text_area :error_comments, rows: 3, class: 'form-control', value: @last_rva_information&.error_comments %>
                                          </div>
                                        </div>
                                        <div class="d-flex align-items-center justify-content-between mt-3">
                                          <button type="button" class="btn btn-primary py-1">Add Another Error</button>
                                          <button type="button" class="btn btn-danger">Remove</button>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <!-- Correct Information Section -->
                                <div class="form-row row mt-3">
                                  <div class="col-xl-12">
                                    <div class="card other-name-card">
                                      <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                          <h6 class="form-heading">Correct Information</h6>
                                          <div class="d-flex gap-2">
                                            <button class="btn btn-primary py-1">Verified</button>
                                            <button class="btn btn-primary py-1">Verify and Update with Correct Information</button>
                                          </div>
                                        </div>
                                        <div class="form-row row mt-3">
                                          <div class="col-xl-6">
                                            <%= f.label :correct_info_selected, 'Select Correct Info:' %>
                                                                                        <%= f.select :correct_info_selected, options_for_select([
                                              ['None', 'None'],
                                              ['Additional Address', 'Additional Address'],
                                              ['Address', 'Address'],
                                              ['City', 'City'],
                                              ['Contact', 'Contact'],
                                              ['Country', 'Country'],
                                              ['County', 'County'],
                                              ['Detailed Attestation Explanation Missing', 'Detailed Attestation Explanation Missing'],
                                              ['Fax', 'Fax'],
                                              ['From', 'From'],
                                              ['Gap in Employment', 'Gap in Employment'],
                                              ['Incorrect Attestation Response', 'Incorrect Attestation Response'],
                                              ['No Record Found', 'No Record Found'],
                                              ['Other', 'Other'],
                                              ['Phone', 'Phone'],
                                              ['Position', 'Position'],
                                              ['Practice Name', 'Practice Name'],
                                              ['Reason for Leaving', 'Reason for Leaving'],
                                              ['Record too Old', 'Record too Old'],
                                              ['State/Province', 'State/Province'],
                                              ['Suite/Apt/Mail Stop', 'Suite/Apt/Mail Stop'],
                                              ['To', 'To'],
                                              ['To Present Or Not', 'To Present Or Not'],
                                              ['Zip/Postal Code', 'Zip/Postal Code']
                                            ], selected: @last_rva_information&.correct_info_selected), { include_blank: 'Select option' }, class: 'form-select' %>

                                          </div>
                                          <div class="col-xl-6">
                                            <%= f.label :correct_info_text, 'Enter Details:' %>
                                            <%= f.text_field :correct_info_text, class: 'form-control', value: @last_rva_information&.correct_info_text %>
                                          </div>
                                        </div>
                                        <div class="d-flex align-items-center justify-content-between mt-3">
                                          <button type="button" class="btn btn-primary py-1">Add</button>
                                          <button type="button" class="btn btn-danger">Remove</button>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <hr class="form-hr">
                                <div class="row mt-5">
                                  <div class="col-md-6">
                                    <label for="">Verification Status:</label>
                                  </div>
                                  <div class="col-md-6">
                                    <span class="font-bold verification-status"><%= @last_rva_information&.verification_status.presence || '' %></span>
                                  </div>
                                </div>
                                <hr class="form-hr">
                                <div class="row">
                                  <div class="col-md-6">
                                    <label for="">Notification Status:</label>
                                  </div>
                                  <div class="col-md-6">
                                    <span class="font-bold notification-status"><%= @last_rva_information&.notification_status.presence || '' %></span>
                                  </div>
                                </div>
                                <hr class="form-hr">
                                <div class="row">
                                  <div class="col-md-6">
                                    <label for="">Verification Date:</label>
                                  </div>
                                  <div class="col-md-6">
                                    <span class="font-bold verification-date"><%= @last_rva_information&.verification_date.presence || '' %></span>
                                  </div>
                                </div>
                                <hr class="form-hr">
                                <div class="row">
                                  <div class="col-md-6">
                                    <label for="">Verifier:</label>
                                  </div>
                                  <div class="col-md-6">
                                    <span class="font-bold verifier"><%= @last_rva_information&.verifier.presence || '' %></span>
                                  </div>
                                </div>
                                <hr class="form-hr">

                                <!-- Comments and Save Button -->
                                <div class="form-row row mt-3">
                                  <div class="col-xl-12">
                                    <%= f.label :verification_comments, 'Comments:' %>
                                    <%= f.text_area :verification_comments, rows: 3, class: 'form-control', value: @last_rva_information&.verification_comments %>
                                  </div>
                                </div>
                                <div class="d-flex justify-content-end gap-2 mt-3">
                                  <%= f.button 'Save Verification', class: 'btn btn-primary py-1', id: 'verification-btn' %>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="form-row row mt-3">
                          <div class="card other-name-card">
                            <div class="card-body">
                              <h6 class="form-heading">Audit</h6>

                              <div class="form-row row mt-3">
                                <div class="col-xl-12">
                                  <div class="card other-name-card">
                                    <div class="card-body">
                                      <h6 class="form-heading">Reasons</h6>
                                      <div class="form-row row">
                                        <div class="col-xl-6">
                                          <%= f.label :audit_reason, 'Reason:' %>
                                                                                    <%= f.select :audit_reason, options_for_select([
                                            ['None', 'None'],
                                            ['Address Information Incorrect', 'Address Information Incorrect'],
                                            ['Adverse Action Not Recorded', 'Adverse Action Not Recorded'],
                                            ['From Date Incorrect', 'From Date Incorrect'],
                                            ['Gap Explanation Missing/Inadequate', 'Gap Explanation Missing/Inadequate'],
                                            ['Position Incorrect', 'Position Incorrect'],
                                            ['Practice/Employer Name Incorrect', 'Practice/Employer Name Incorrect'],
                                            ['Show on Tickler Status Incorrect', 'Show on Tickler Status Incorrect'],
                                            ['Source Date Greater Than 90 Days', 'Source Date Greater Than 90 Days'],
                                            ['Source Date Incorrect', 'Source Date Incorrect'],
                                            ['Source Name Incorrect', 'Source Name Incorrect'],
                                            ['Supervisor Name Incorrect', 'Supervisor Name Incorrect'],
                                            ['Theorem: Incorrect Information Entered', 'Theorem: Incorrect Information Entered'],
                                            ['Theorem: Necessary Information Not Entered', 'Theorem: Necessary Information Not Entered'],
                                            ['Theorem: Unnecessary Information Entered', 'Theorem: Unnecessary Information Entered'],
                                            ['To Date Incorrect', 'To Date Incorrect'],
                                            ['Verification Not Uploaded', 'Verification Not Uploaded'],
                                            ['Verification Status Incorrect', 'Verification Status Incorrect']
                                          ], selected: @last_rva_information&.audit_reason), { include_blank: 'Select option' }, class: 'form-select' %>

                                        </div>
                                        <div class="col-xl-6">
                                          <%= f.label :audit_reason_comments, 'Comments:' %>
                                          <%= f.text_field :audit_reason_comments, class: 'form-control', value: @last_rva_information&.audit_reason_comments %>
                                        </div>
                                      </div>
                                      <div class="d-flex align-items-center justify-content-between mt-3">
                                        <%= button_tag 'Add Another Reason', class: 'btn btn-primary py-1', type: 'button' %>
                                        <%= button_tag 'Remove', class: 'btn btn-danger', type: 'button' %>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div class="form-row d-flex align-items-center gap-3">
                                <%= f.label :audit_status, 'Audit Status:' %>
                                <%= f.radio_button :audit_status, 'Pass', 
                                                     id: 'audit-status-pass', 
                                                     class: 'form-check-input', 
                                                     required: true, 
                                                     checked: @last_rva_information&.audit_status == true %>
                                 <%= f.label :audit_status, 'Pass', 
                                              for: 'audit-status-pass', 
                                              class: 'form-check-label' %>
 
                                 <%= f.radio_button :audit_status, 'Fail', 
                                                     id: 'audit-status-fail', 
                                                     class: 'form-check-input', 
                                                     required: true, 
                                                     checked: @last_rva_information&.audit_status == false %>
                                 <%= f.label :audit_status, 'Fail', 
                                              for: 'audit-status-fail', 
                                              class: 'form-check-label' %>
                              </div>
                              <hr class="form-hr">

                              <div class="row">
                                <div class="col-md-6">
                                  <label for="">Audit Date:</label>
                                </div>
                                <div class="col-md-6">
                                  <span class="font-bold" id="rva_information_audit_date"><%= @last_rva_information&.audit_date.presence || '' %></span>
                                </div>
                              </div>
                              <hr class="form-hr">

                              <div class="row">
                                <div class="col-md-6">
                                  <label for="">Auditor:</label>
                                </div>
                                <div class="col-md-6">
                                  <span class="font-bold" id="rva_information_auditor"><%= @last_rva_information&.auditor.presence || '' %></span>
                                </div>
                              </div>
                              <hr class="form-hr">

                              <div class="form-row row">
                                <div class="col-xl-12">
                                  <%= f.label :audit_comments, 'Comments:' %>
                                  <%= f.text_area :audit_comments, rows: 3, class: 'form-control', value: @last_rva_information&.audit_comments %>
                                </div>
                              </div>

                              <div class="d-flex justify-content-end gap-2 mt-3">
                                <%= f.button 'Save Audit', class: 'btn btn-primary py-1', id: 'audit-btn' %>
                              </div>
                            </div>
                          </div>
                        </div>
                      <% end %>  
                    </div>
                  </div>
                </div>
              </div>
            </div>

        <!-- Verification Letter Modal -->
        <div class="modal fade" id="verifLetterModal" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="content">
                            <div class="modal-title">
                                <h6 class="offset-md-3">Employment Verification Letter</h6>
                                <button class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
                            </div>
                            <div class="mt-3 left-pane">
                                <h6>Preview Letter</h6>
                            </div>
                            <div class="form-row row page-applicable mt-3">
                                <div class="col-xl-12">
                                    <div class="card other-name-card">
                                        <div class="card-body">
                                            <h6 class="form-heading">Send Fax</h6>
                                            <span class="page-note mt-1">
                                                <i class='bx bx-error-circle font-red'></i> <span>Please correct the
                                                    invalid fax number. Fields will be enabled once corrected.</span>
                                            </span>
                                            <div class="form-row mt-2">
                                                <label for="">Fax2Mail Email Address:</label>
                                                <input type="text" id="fax-email" name="fax-email" class="form-control"
                                                    placeholder="Type here...">
                                            </div>
                                            <div class="form-row d-flex justify-content-end mt-4">
                                                <button class="btn btn-primary py-1">
                                                    Send Fax
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row row page-applicable mt-3">
                                <div class="col-xl-12">
                                    <div class="card other-name-card">
                                        <div class="card-body">
                                            <h6 class="form-heading">Send Email</h6>
                                            <span class="page-note mt-1">
                                                <i class='bx bx-error-circle font-red'></i> <span>Please correct the
                                                    invalid email address. Fields will be enabled once corrected.</span>
                                            </span>
                                            <div class="form-row mt-2">
                                                <label for="">Email Address To:</label>
                                                <input type="text" id="email-to" name="email-to" class="form-control"
                                                    placeholder="Type here...">
                                            </div>
                                            <div class="form-row">
                                                <label for="">Email Address CC:</label>
                                                <input type="text" id="email-cc" name="email-cc" class="form-control"
                                                    placeholder="Type here...">
                                            </div>
                                            <div class="form-row d-flex justify-content-end mt-4">
                                                <button class="btn btn-primary py-1">
                                                    Send Email
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row mt-3 d-flex justify-content-center">
                                <button class="btn btn-red">Delete Comment</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
<script type="text/javascript">
    $(document).ready(function() {
        $('.contact_method_radio').on('change',function(e) {
            if($(this).val() == 'email') {
                var provider_type = $('#provider_type').val()
                console.log("provider_type")
                if(provider_type == 'credentialing_contact') {
                    $('#to').val($('#cred_contact_email').val())
                }
                if(provider_type == 'confidential_contact') {
                    $('#to').val($('#conf_contact_email').val())
                }
                if(provider_type == 'client_contact') {
                    $('#to').val($('#client_contact_email').val())
                }
                if(provider_type == 'intitution_contact') {
                    $('#to').val($('#intitution_contact_email').val())
                }
            }
        });
      });
        $('#provider_type').on('change',function(e) {
            if($(this).val() == 'credentialing_contact') {
                $('#to').val($('#cred_contact_email').val())
            }
            if($(this).val() == 'confidential_contact') {
                $('#to').val($('#conf_contact_email').val())
            }
            if($(this).val() == 'client_contact') {
                $('#to').val($('#client_contact_email').val())
            }
            if($(this).val() == 'intitution_contact') {
                $('#to').val($('#intitution_contact_email').val())
            }
        });

      <%# rva_information section js %>
        document.addEventListener('DOMContentLoaded', function () {
          // Send request parameter
          document.getElementById('send-request-btn').addEventListener('click', function (e) {
            e.preventDefault();
            const firstName = document.getElementById('firstname').innerText.trim();
            const personalInfoId = document.querySelector('input[name="personal_info_id"]').value;
            const PracticeEmploymentId = document.querySelector('input[name="practice_employment_id"]').value;

            document.querySelector('.loading-overlay').style.display = 'block';
            fetch('/webscrapers/send_employment_request', {
              method: 'POST',
              headers: {
                'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]').content,
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                first_name: firstName,
                personal_info_id: personalInfoId,
                employment_id: PracticeEmploymentId
              })
            })
              .then(response => response.json())
              .then(data => {
                populateRvaData(data.rva_information);
                document.querySelector('.loading-overlay').style.display = 'none';
                document.getElementById('send-request-btn').setAttribute('disabled', 'true');
                document.getElementById('send-request-btn').classList.remove('btn');
              })
              .catch(error => console.error('Error:', error));
          });

          // Verification Button Click
          document.getElementById('verification-btn').addEventListener('click', function (e) {
            e.preventDefault();
            if (!document.getElementById('rva_information_source_date').value) {
              alert('Please select a Source Date before saving.');
              return;
            }

            const auditFormData = new FormData(document.getElementById('audit-form'));
            auditFormData.append('section', 'verification');

            fetch('/mhc/verification-platform/generate_rva_information', {
              method: 'POST',
              headers: {
                'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]').content
              },
              body: auditFormData
            })
              .then(response => response.json())
              .then(data => {
                populateRvaData(data.rva_information);
              })
              .catch(error => console.error('Error:', error));
          });

          // Audit Button Click
          document.getElementById('audit-btn').addEventListener('click', function (e) {
            e.preventDefault();
            if (!document.querySelector('input[name="rva_information[audit_status]"]:checked')) {
              alert('Please select an Audit Status before saving.');
              return;
            }

            const auditFormData = new FormData(document.getElementById('audit-form'));
            auditFormData.append('section', 'audit');
            auditFormData.append('practice_employment_id', document.querySelector('input[name="practice_employment_id"]').value);

            fetch('/mhc/verification-platform/generate_rva_information', {
              method: 'POST',
              headers: {
                'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]').content
              },
              body: auditFormData
            })
              .then(response => response.json())
              .then(data => {
                populateRvaData(data.rva_information);
                document.getElementById('re-rva').classList.remove('d-none');
              })
              .catch(error => console.error('Error:', error));
          });

          // Skip RVA Button Click
          if (!document.getElementById('skip-rva-btn').dataset.listenerAttached) {
            document.getElementById('skip-rva-btn').dataset.listenerAttached = 'true';

            document.getElementById('skip-rva-btn').addEventListener('click', function (e) {
              e.preventDefault(); // Prevent default to avoid double submit
              const button = e.target;
              const informationId = button.dataset.informationId;
              const personalInformationId = button.dataset.personalInformationId;
              const employmentId = button.dataset.employmentId;

              document.querySelector('.loading-overlay').style.display = 'block';

              fetch('/webscrapers/send_employment_skip_rva', {
                method: 'POST',
                headers: {
                  'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]').content,
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  information_id: informationId,
                  personal_information_id: personalInformationId,
                  employment_id: employmentId,
                }),
              })
                .then(response => response.json())
                .then(data => {
                  if (data.success) {
                    populateRvaData(data.rva_information);
                    document.querySelector('.loading-overlay').style.display = 'none';
                    const modal = new bootstrap.Modal(document.getElementById('QAModal'));
                    modal.show();
                  } else {
                    alert('Failed to create RVA record');
                  }
                })
                .catch(error => {
                  console.error('Error:', error);
                  document.querySelector('.loading-overlay').style.display = 'none';
                });
            });
          }

          // Show Modal Event Listener
          const qualityAuditModal = document.getElementById('QAModal');
          qualityAuditModal.addEventListener('show.bs.modal', function (event) {
            const button = event.relatedTarget;
            document.querySelector('[name="first_name"]').value = button.dataset.firstName || '';
            document.querySelector('[name="last_name"]').value = button.dataset.lastName || '';
            document.querySelector('[name="id"]').value = button.dataset.informationId || '';
            document.querySelector('[name="personal_info_id"]').value = button.dataset.personalInformationId || '';
            document.querySelector('[name="practice_employment_id"]').value = button.dataset.employmentId || '';
          });
        });

        function populateRvaData(rvaInfo) {
          if (!rvaInfo) return;

          const setElementValue = (selector, value) => {
            const element = document.querySelector(selector);
            if (element) element.value = value || '';
          };

          const setElementText = (selector, value) => {
            const element = document.querySelector(selector);
            if (element) element.innerText = value || '';
          };

          const setElementChecked = (selector, value) => {
            const element = document.querySelector(selector);
            if (element) element.checked = !!value;
          };

          // Populate General Data
          setElementValue('[name="id"]', rvaInfo.id);
          setElementText('.sent-request', rvaInfo.send_request);
          setElementText('.requested-by', rvaInfo.requested_by);
          setElementText('.requested-date', rvaInfo.requested_date);
          setElementValue('.req-fee-amount', rvaInfo.required_fee_amount);
          setElementText('.received-by', rvaInfo.received_by);
          setElementText('.received-date', rvaInfo.received_date);
          setElementValue('.request-comment', rvaInfo.comments);
          setElementChecked('input[name="check_generated"]', rvaInfo.required_fee_amount);
          setElementChecked('input[name="received_status"]', rvaInfo.received_status);

          // Check requested method dynamically
          if (rvaInfo.requested_method) {
            const methodElement = document.getElementById(`method-${rvaInfo.requested_method}`);
            if (methodElement) methodElement.checked = true;
          }

          // Verification Section
          setElementText('.verification-status', rvaInfo.verification_status);
          setElementText('.verification-date', rvaInfo.verification_date);
          setElementText('.verifier', rvaInfo.verifier);
          setElementValue('#rva_information_verification_comments', rvaInfo.verification_comments);
          setElementChecked('input[name="rva_information[in_good_standing]"]', rvaInfo.in_good_standing);

          // Audit Section
          setElementValue('input[name="rva_information[audit_status]"]', rvaInfo.audit_status);
          setElementText('#rva_information_audit_date', rvaInfo.audit_date);
          setElementText('#rva_information_auditor', rvaInfo.auditor);
          setElementValue('#rva_information_audit_comments', rvaInfo.audit_comments);

          // Check audit status dynamically
          if (rvaInfo.audit_status === true) {
            const auditPass = document.getElementById('audit-status-pass');
            if (auditPass) auditPass.checked = true;
          } else {
            const auditFail = document.getElementById('audit-status-fail');
            if (auditFail) auditFail.checked = true;
          }

          // Handle adverse action dynamically
          if (rvaInfo.adverse_action_status !== undefined) {
            const adverseActionElement = document.getElementById(`verif-${rvaInfo.adverse_action_status}`);
            if (adverseActionElement) adverseActionElement.checked = true;
          }
        }
</script>
