<%= render 'user_restriction', locals: { access_key: 'App Tracker' } do %>

<div class="content container-fluid">
	<div class="row mb-3">
		<div class="col-lg-6">
			<h2>Search Provider
			</h2>
			<form class="form_search_with_icon">
			<div class="">
				<input type="text" name="user_search" class="form-control" placeholder="Search by Name or NPI" value="<%=  params[:user_search] %>">
				<i class="bi bi-search"></i>
			</div>
			</form>
			<small><code>(npi, first name, middle name, last name, full name)</code></small>
		</div>
	</div>
	<div class="row">
		<div class="col-lg">
			<table class="table table-striped table-bordered table-responsive">
					<thead>
							<tr>
								<th scope="col" class="bg-primary text-white">Provider Name</th>
								<th scope="col" class="bg-primary text-white">Practitioner/Provider Type</th>
								<th scope="col" class="bg-primary text-white">NPI</th>
								<th scope="col" class="bg-primary text-white">Action</th>
							</tr>
					</thead>
					<tbody>
						<% @providers.each do |provider| %>
						<tr>
							<td><a href="javascript:void()" class="text-secondary show-provider-button" data-provider-id=<%= provider.id %> data-remote="true"><%=provider.provider_name%></a></td>
							<td><a href="javascript:void()" class="text-secondary show-provider-button" data-provider-id=<%= provider.id %> data-remote="true"><%=provider.practitioner_type%></a></td>
							<td><a href="javascript:void()" class="text-secondary show-provider-button" data-provider-id=<%= provider.id %> data-remote="true"><%=provider.npi %></a>
							<td>
								<%= link_to 'Upload Document', upload_documents_app_tracker_path(provider) %>
								<% if provider.uploaded_documents.size != 0 %>
								<br>
									<%= link_to pluralize(provider.uploaded_documents.size, "Uploaded Document"), view_uploaded_documents_app_tracker_path(provider) %>
								<% end %>
							</td>
						</tr>
						<% end %>
					</tbody>
			</table>
			<% if @providers %>
			<div class="col-lg-12">
							<div class="d-flex justify-content-between bg-medium-grey rounded align-items-center py-3">
							<div class="page_info ms-3 text-black">
															<%= page_entries_info @providers %>
							</div>
							<% if params[:per_page ].present? %>
											<%= will_paginate @providers, :params =>  {per_page: @per_page }, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
							<% else %>
											<%= will_paginate @providers, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
							<% end %>
							</div>
			</div>
			<% end %>
		</div>
		<div id="show-provider-container">

		</div>
	</div>
</div>
<% end %>