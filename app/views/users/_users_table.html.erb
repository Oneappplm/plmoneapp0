<h2>Users List</h2>
<table class="table">
  <thead>
    <tr>
      <th scope="col" class="bg-primary text-white">Name</th>
      <th scope="col" class="bg-primary text-white">Email</th>
      <th scope="col" class="bg-primary text-white">Role</th>
      <th scope="col" class="bg-primary text-white"></th>
    </tr>
  </thead>
  <tbody>
    <% if @users %>
      <% @users.each do |user| %>
      <% next if current_user.email == user.email %>
      <% next if current_user.not_allowed_to_view?(user.user_role)%>
      <tr>
        <td scope="row"><%= user.full_name %></td>
        <td><%= user.email %></td>
        <td><%= user.role  %></td>
        <th scope="row">
          <div class="d-flex gap-2">
            <%= link_to edit_user_path(user), class: 'btn btn-sm btn-primary' do %>
              <i class="bi bi-pencil"></i>
            <% end %>
            <%= button_to user_path(user), method: :delete, class: 'btn btn-sm btn-danger delete-button', data: {confirm: 'Are you sure?'} do %>
              <i class="bi bi-trash"></i>
            <% end %>
         </div>
        </th>
      </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
<% if @users %>
<div class="col-lg-12">
  <div class="d-flex justify-content-between bg-medium-grey rounded align-items-center py-3">
  <div class="page_info ms-3 text-black">
      <%= page_entries_info @users %>
  </div>
  <% if params[:per_page ].present? %>
    <%= will_paginate @users, :params =>  {per_page: @per_page }, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
  <% else %>
    <%= will_paginate @users, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
  <% end %>
  </div>
</div>
<% end %>